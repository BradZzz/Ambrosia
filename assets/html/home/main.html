<div>
	<div layout="column" class="main">
		<md-card style="height:98vh" layout="column">
			<!--<div se-collapse se-collapse-cards="user"></div>-->
			<div layout="row" flex style="align-items: center;">
				<div flex="20" style="background:#673AB7; height: 100%; position: relative;">
					<md-list flex>
						<md-subheader class="md-no-sticky">{{ user.name }}</md-subheader>
						<md-list-item class="md-2-line" ng-repeat="cat in categories track by $index" ng-click="select($index)" style="border: 1px #000000 solid;">
							<div class="md-list-item-text" layout="column">
								<h3 style="color:white">{{ cat.name }}</h3>
							</div>
						</md-list-item>
						<md-button style="border: 1px #000000 solid; color:white; background: #FF5722; position: absolute; bottom: 0; left: 0; width: 100%; margin: 0; height: 5em;">Save</md-button>
					</md-list>
				</div>
				<div flex="80" style="color: #212121; background: white; height: 100%; padding: 10px 50px; overflow-y: auto;">
					<h1>{{ categories[selected].name }}</h1>
					<div class="tiny-margin" ng-repeat="val in categories[selected].cats track by $index">
						<h2>{{ val.capitalizeFirstLetter() }}</h2>

						<div class="tiny-margin" ng-repeat="(key2,val2) in user[val]" ng-if="isObject(user[val]) && !isArr(user[val])">
							<md-input-container class="full" ng-if="!isArr(user[val][key2]) && !isObject(user[val][key2])">
								<label>{{ key2 }}</label>
								<input ng-model="user[val][key2]">
							</md-input-container>

							<!-- I'm not writing a recursive directive for work I do for free. That's no bueno territory. A directive should go here though... -->

							<div ng-if="isArr(user[val][key2])">
								<h3>{{ key2.capitalizeFirstLetter() }}</h3>
								<md-card class="tiny-margin" ng-repeat="item in user[val][key2] track by $index" style="padding: 2em;">
									<!--<h3>{{ $index }}</h3>-->

									<md-input-container ng-if="!isArr(item) && !isObject(item)" class="full">
										<label>{{ key2 }}</label>
										<input ng-model="item">
									</md-input-container>

									<md-input-container ng-if="isObject(item) && !isArr(item)" ng-repeat="(key3,val3) in item track by $index">
										<label>{{ key3 }}</label>
										<input ng-model="val3">
									</md-input-container>

									<md-input-container ng-if="isArr(item)" ng-repeat="val3 in item track by $index">
										<input ng-model="val3">
									</md-input-container>
								</md-card>
							</div>
						</div>

						<div class="tiny-margin" ng-repeat="ix in user[val] track by $index" ng-if="isArr(user[val])">
							<!--<h3>{{ $index }}</h3>-->
							<div ng-if="isObject(ix) && !isArr(ix)">
								<div ng-repeat="(key3,val3) in ix track by $index">
									<md-input-container class="full" ng-if="!isObject(val3) && !isArr(val3)">
										<label>{{ key3 }}</label>
										<input ng-model="val3">
									</md-input-container>

									<div ng-if="isObject(val3) && !isArr(val3)">
										<h3>{{ key3.capitalizeFirstLetter() }}</h3>
										<md-input-container class="large-margin" ng-repeat="(key4,val4) in val3 track by $index">
											<label>{{ key4 }}</label>
											<input ng-model="val4">
										</md-input-container>
									</div>

									<div ng-if="isArr(val3)">
										<h3>{{ key3.capitalizeFirstLetter() }}</h3>
										<div class="large-margin" ng-repeat="val4 in val3 track by $index">
											<md-input-container class="full" ng-if="!isArr(val4) && !isObject(val4)">
												<input ng-model="val4">
											</md-input-container>

											<md-input-container ng-repeat="(key5,val5) in val4 track by $index" ng-if="isObject(val4) && !isArr(val4)">
												<label>{{ key5 }}</label>
												<input ng-model="val5">
											</md-input-container>

											<md-input-container ng-if="isArr(val4)" ng-repeat="val5 in val4 track by $index">
												<input ng-model="val5">
											</md-input-container>
										</div>
									</div>

								</div>
							</div>
							<md-input-container ng-if="isArr(ix)" ng-repeat="val3 in ix track by $index">
								<input ng-model="val3">
							</md-input-container>
						</div>

					</div>
				</div>
			</div>
		</md-card>
	</div>
</div>